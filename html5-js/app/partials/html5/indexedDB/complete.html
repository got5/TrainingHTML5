<div class="bloc-content text-content">
<ul>
	<li>How could I know that I have retrieve all the data</li>
	<ul>
		<li>There is nothing to help us in the API</li>
		<li>But we can manage to do that ourself</li>
	</ul>
</ul>		
<editor editor-options="{height:450,compileCode:false}">
<file type="javascript" name="range.js">//...
 var name = "Johnson",
 	transaction = db.instance.transaction(['people'],'readonly'),
	index = transaction.objectStore('people').index('age'),
	range = IDBKeyRange.lowerBound(40);
var 
	data = [];
	countRequest = index.count(range);

db.setDefaultErrorHandler(countRequest);

countRequest.onsuccess = function(countRequestEventArgs){
	var
		totalCount = countRequestEventArgs.target.result,
		cursorRequest = index.openCursor(range);

	db.setDefaultErrorHandler(countRequest);

	cursorRequest.onsuccess = function(e){
		var
			person = {},
			result = e.target.result;
		if(result !== null){
			person = result.value;
			data.push(person);
			if(data.length == totalCount){
				done(data);
			}else{
				result.continue();
			}
		}
	}	
};

//not event built in the api 
var done = function(data){
    console.log("We have all the data : "+ data.length + " objects returned");
}</file>
</editor>

</div>

